<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
 
 <title>Scott Watermasysk</title>
 <link href="http://scottw.com/atom.xml" rel="self"/>
 <link href="http://scottw.com/"/>
 <updated>2010-06-02T05:32:06-04:00</updated>
 <id>http://scottw.com/</id>
 <author>
   <name>Scott Watermasysk</name>
   <email>scottwater@gmail.com</email>
 </author>
 
 
 <entry>
   <title>Accessing a Restful Service with Ruby via NTLM</title>
   <link href="http://scottw.com/rest-ruby-ntlm"/>
   <updated>Liquid error: undefined method `xmlschema' for "06/02/2010 04:55 AM":String</updated>
   <id>http://scottw.com/accessing-restful-service-via-ntlm</id>
   <content type="html">&lt;p&gt;I have been looking for an easy to use library for accessing a restful service which sits behind &lt;span class=&quot;caps&quot;&gt;NTLM&lt;/span&gt; via Ruby for sometime now and had been largely unsuccessful until now!&lt;/p&gt;
&lt;p&gt;Last night after a bit more googling, I went back to twitter for help. &lt;a href=&quot;http://twitter.com/grantc/status/15222076534&quot;&gt;Grant Carpenter&lt;/a&gt; put me on the right path with this:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;I had the ntlm part working by patching rubyntlm (and then modifying savon). next stop: wsdl impedance &lt;a href=&quot;http://bit.ly/982btc&quot;&gt;http://bit.ly/982btc&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;The bitly link above points to a defunct project &lt;a href=&quot;http://code.google.com/p/ruby-httpclient/&quot;&gt;ruby-httpclient&lt;/a&gt;. However, it appears to have been reborn as &lt;a href=&quot;http://dev.ctor.org/http-access2&quot;&gt;httpclient&lt;/a&gt; with its source now hosted on &lt;a href=&quot;http://github.com/nahi/httpclient&quot;&gt;gitub&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Getting a sample up and running could not be easier.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;gem install httpclient
gem install rubyntlm
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;p&gt;Note: If you are still doing &lt;em&gt;sudo gem install&lt;/em&gt; and not using &lt;span class=&quot;caps&quot;&gt;RVM&lt;/span&gt; you are really missing out.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;ruby&quot;&gt;&lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;httpclient&amp;#39;&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;domain&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;http://mydomain.com&amp;#39;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;user&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;username&amp;#39;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;password&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;password&amp;#39;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;client&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;HTTPClient&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;new&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;client&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;set_auth&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;domain&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;password&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;client&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;domain&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;/my-path/service/something.json&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;content&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;p&gt;I have only been using the httpclient library for an hour or so, but so far the it appears to be very robust with built in support for just about everything Http.&lt;/p&gt;</content>
 </entry>
 
 <entry>
   <title>OData</title>
   <link href="http://scottw.com/odata"/>
   <updated>Liquid error: undefined method `xmlschema' for "05/13/2010 11:31 AM":String</updated>
   <id>http://scottw.com/odata</id>
   <content type="html">&lt;p&gt;Yesterday, I made the trip into &lt;span class=&quot;caps&quot;&gt;NYC&lt;/span&gt; to added the &lt;a href=&quot;http://www.odata.org/roadshow&quot;&gt;OData Roadshow&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;For those who have not looked into &lt;a href=&quot;http://www.odata.org/&quot;&gt;OData&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The Open Data Protocol (OData) is a Web protocol for querying and updating data that provides a way to unlock your data and free it from silos that exist in applications today. OData does this by applying and building upon Web technologies such as &lt;span class=&quot;caps&quot;&gt;HTTP&lt;/span&gt;, Atom Publishing Protocol (AtomPub) and &lt;span class=&quot;caps&quot;&gt;JSON&lt;/span&gt; to provide access to information from a variety of applications, services, and stores.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
	&lt;li&gt;I personally do not feel it is truly RESTful, but I am willing to give up some of the tenants of &lt;span class=&quot;caps&quot;&gt;REST&lt;/span&gt; in order to gain consistency.&lt;/li&gt;
	&lt;li&gt;While the protocol specification states it is read and write, I would be 99% of implementations will be read only. In fact, in the 5 hours of content covered by Microsoft, there were zero examples of updates.&lt;/li&gt;
	&lt;li&gt;If you are using a Linq to &amp;#8220;Your Data Access&amp;#8221; technology adding OData at a high level will be simple. If you are not using one, I expect this as quite a bit of work.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Overall, I really like the concept. Simple conventions for querying and representing data. &lt;span class=&quot;caps&quot;&gt;IMO&lt;/span&gt;, this is the kind of stuff Microsoft should be doing more of (instead of silverlight/windows phone/etc). Couple with their data market (Dallas). I would expect to see much more data becoming available via OData.&lt;/p&gt;
&lt;p&gt;On a side note, if the OData Roadshow is coming through your town, I would highly recommend checking it out.&lt;/p&gt;
&lt;p&gt;Finally, for a walk through on setting up your own OData service, check out Hanselman&amp;#8217;s &lt;a href=&quot;http://www.hanselman.com/blog/CreatingAnODataAPIForStackOverflowIncludingXMLAndJSONIn30Minutes.aspx&quot;&gt;OData For StackOverflow&lt;/a&gt; post.&lt;/p&gt;</content>
 </entry>
 
 <entry>
   <title>Dynamics and MongoDB Revisited</title>
   <link href="http://scottw.com/dynamics-mongodb-revisited"/>
   <updated>Liquid error: undefined method `xmlschema' for "04/22/2010 10:03 AM":String</updated>
   <id>http://scottw.com/dynamics-mongodb-revisited</id>
   <content type="html">&lt;p&gt;A couple of months ago I wrote about wiring up &lt;a href=&quot;http://scottw.com/mongodb-dynamics&quot;&gt;C# 4.0 dynamics with MongoDB&lt;/a&gt;. At the time, I opened up the &lt;a href=&quot;http://github.com/samus/mongodb-csharp&quot;&gt;MongoDB-CSharp&lt;/a&gt; library and modified a bit of the code.&lt;/p&gt;
&lt;p&gt;For obvious reasons this was not a good long term solution. In what appeared to be moment of clarity a couple of days ago, I decided to try to use extension methods and add dynamics on top of MongoDB-CSharp.&lt;/p&gt;
&lt;p&gt;To the credit of the MongoDB-CSharp team, getting the basic functionality up and running was very simple. However, in the end it turns out that two compiler hacks (extension methods and dynamics) do not make a right. :)&lt;/p&gt;
&lt;p&gt;Once in place, the code to use it looks something like this:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;csharp&quot;&gt;&lt;span class=&quot;k&quot;&gt;using&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;m&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Mongo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;db&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;mongocsharp&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    
    &lt;span class=&quot;c1&quot;&gt;//ext method to get our &amp;quot;special&amp;quot; collection&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;col&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;db&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;GetDynoCollection&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;sample&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; 
    &lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Connect&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;//dynamic object to store our data&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;dynamic&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;newDoc&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;DynoDocument&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;newDoc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;title&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;Dyno Collections&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;newDoc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;slug&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;dyno&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;col&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Insert&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;newDoc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;dynamic&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;query&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;DynoDocument&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt; 
    &lt;span class=&quot;n&quot;&gt;query&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;slug&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;dyno&amp;quot;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;dynamic&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;col&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;FindOne&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;query&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;Console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;WriteLine&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;title&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Disconnect&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;p&gt;While it works, it still feels too awkward to be useful &lt;span class=&quot;caps&quot;&gt;IMO&lt;/span&gt;. Normally, this I would just delete something like this, but I am trying to let less code die on my machine, so I published it all as a GitHub gist: &lt;a href=&quot;http://gist.github.com/374418&quot;&gt;DynoMongo&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;After working on this, I have come to the following conclusions:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;MongoDB-CSharp provides adequate flexibility on a schema if I need it in .&lt;span class=&quot;caps&quot;&gt;NET&lt;/span&gt;. Mix in Automapper and a helper or two you are all set.&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://github.com/atheken/NoRM&quot;&gt;Norm&lt;/a&gt; provides more structure if that is a requirementl&lt;/li&gt;
	&lt;li&gt;Dynamics are really just a parlor trick. If I want the flexibility of a dynamic language, using C# is a mistake.&lt;/li&gt;
	&lt;li&gt;I should probably try to do something similar in IronRuby, but with all the excellent MongoDB Ruby libraries out there, I am not sure it is even worth the thought.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Anyway, if someone feels this is interesting or useful, feel free to grab the gist, &lt;a href=&quot;http://gist.github.com/374418&quot;&gt;DynoMongo&lt;/a&gt;, and run with it.&lt;/p&gt;</content>
 </entry>
 
 <entry>
   <title>SEO with Rack-Rewrite</title>
   <link href="http://scottw.com/seo-rack-rewrite"/>
   <updated>Liquid error: undefined method `xmlschema' for "04/14/2010 01:43 PM":String</updated>
   <id>http://scottw.com/seo-rack-rewrite</id>
   <content type="html">&lt;p&gt;I am still very much in the camp of &lt;a href=&quot;http://scottw.com/best-seo-advice&quot;&gt;write good&lt;/a&gt; (and consistent) content first and let &lt;span class=&quot;caps&quot;&gt;SEO&lt;/span&gt; handle itself. However, that does not mean you should not keep an eye out for fundamental problems which can cause bad search engine results.&lt;/p&gt;
&lt;p&gt;One of these problems I believe every developer of public web sites needs to be mindful of is duplicate content. Duplicate content causes quite a few problems:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;You may appear to be a spammer in the &amp;#8220;eyes&amp;#8221; of a search engine&lt;/li&gt;
	&lt;li&gt;Links may appear to be directed at two or more urls&lt;/li&gt;
	&lt;li&gt;Your content may have to compete with itself&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;I have long been a fan of &lt;a href=&quot;http://scottw.com/tags#sapi-rewrite&quot;&gt;ISAPI_Rewrite&lt;/a&gt; for &lt;span class=&quot;caps&quot;&gt;IIS&lt;/span&gt; to help manage and control some of these problems (which is in turn heavily influenced by mod_rewrite). However, since I have moved this site to Heroku, I needed to find another solution.&lt;/p&gt;
&lt;p&gt;Thankfully, due to the awesomeness of &lt;a href=&quot;http://rack.rubyforge.org/&quot;&gt;Rack&lt;/a&gt; and middleware, I found a component called &lt;a href=&quot;http://github.com/jtrupiano/rack-rewrite&quot;&gt;Rack-Rewrite&lt;/a&gt; and I was able to leverage it with just a couple of minutes effort.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;A web server agnostic rack middleware for defining and applying rewrite rules. In many cases you can get away with Rack::Rewrite instead of writing Apache mod_rewrite rules.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;I am already using a customized Rack application, &lt;a href=&quot;http://github.com/bry4n/rack-jekyll&quot;&gt;Rack-Jekyll&lt;/a&gt;, to power this site, so plugging in Rack-Rewrite was just as simple as adding a couple of lines to my rackup file.&lt;/p&gt;
&lt;p&gt;Here are the full contents of my config.ru&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;ruby&quot;&gt;&lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;rack/jekyll&amp;quot;&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;rack-rewrite&amp;quot;&lt;/span&gt;

&lt;span class=&quot;no&quot;&gt;ENV&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;RACK_ENV&amp;#39;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;development&amp;#39;&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt;ENV&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;SITE_URL&amp;#39;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;scottw.com&amp;#39;&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;use&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Rack&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Rewrite&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;r301&lt;/span&gt; &lt;span class=&quot;sr&quot;&gt;%r{.*}&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;http://&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;ENV&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;SITE_URL&amp;#39;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;$&amp;amp;&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Proc&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rack_env&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
        &lt;span class=&quot;no&quot;&gt;ENV&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;RACK_ENV&amp;#39;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;production&amp;#39;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rack_env&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;SERVER_NAME&amp;#39;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;ENV&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;SITE_URL&amp;#39;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;    

    &lt;span class=&quot;n&quot;&gt;r301&lt;/span&gt; &lt;span class=&quot;sr&quot;&gt;%r{^(.+)/$}&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;$1&amp;#39;&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;run&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Rack&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Jekyll&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;new&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;p&gt;The two rules I am running on this site ensure that only scottw.com (no www.) is used and that no links end in a &amp;#8220;/&amp;#8221;. The first is particularly important since Heroku issues you a custom url as well.&lt;/p&gt;
&lt;p&gt;What is really interesting about Rack-Rewrite is the ability to execute code as part of your rewrites. This enables a lot of flexibility (such as ignoring some rewrites when running in development mode).&lt;/p&gt;</content>
 </entry>
 
 <entry>
   <title>Is Tekpub (or PeepCode) Worth the Money?</title>
   <link href="http://scottw.com/tekpub"/>
   <updated>Liquid error: undefined method `xmlschema' for "04/09/2010 10:01 AM":String</updated>
   <id>http://scottw.com/tekpub-worth</id>
   <content type="html">&lt;p&gt;My answer to this question has consistently been, &amp;#8220;&lt;em&gt;Only if you value your time&lt;/em&gt;&amp;#8221;.&lt;/p&gt;
&lt;p&gt;As an example, I just started watching &lt;a href=&quot;http://tekpub.com&quot;&gt;Tekpub&amp;#8217;s&lt;/a&gt; &lt;a href=&quot;http://tekpub.com/preview/iphone&quot;&gt;iPhone Development&lt;/a&gt; series. There is currently about 2 hours worth of content (and I believe more is on the way). The cost for the series is listed as $25 on the site.&lt;/p&gt;
&lt;p&gt;My guess is the videos will save me about 10 to 20 hours of reading, tinkering, and just generally getting things going. Now assuming I put a value of more than $2.50/hr for my time (and i do :), the purchase&lt;sup class=&quot;footnote&quot; id=&quot;fnr1&quot;&gt;&lt;a href=&quot;#fn1&quot;&gt;1&lt;/a&gt;&lt;/sup&gt; would be a no brainer.&lt;/p&gt;
&lt;p&gt;I also have a subscription to &lt;a href=&quot;http://peepcode.com&quot;&gt;Peepcode&lt;/a&gt; which I have been loving as well.&lt;/p&gt;
&lt;p class=&quot;footnote&quot; id=&quot;fn1&quot;&gt;&lt;a href=&quot;#fnr1&quot;&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/a&gt; Disclosure: Rob Conery did comp me a full season pass. However, this came when I was about to personally buy a license so I have no qualms writing this review.&lt;/p&gt;</content>
 </entry>
 
 <entry>
   <title>.Text Lives (sort of)</title>
   <link href="http://scottw.com/dottext-lives"/>
   <updated>2010-04-07T00:00:00-04:00</updated>
   <id>http://scottw.com/dottext-lives</id>
   <content type="html">&lt;p&gt;If you are seeing this post, it means you are visiting my new home on the Intertubes &amp;#8211; &lt;a href=&quot;http://scottw.com&quot;&gt;ScottW.com&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;I have owned ScottW.com for a while, so I figured it was time to actually put it to use. Since I was going to make a change, I figured I would take the time to clean some things up and simplify the site.&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;I removed a bunch of posts which are no longer relevant (example: open positions). I am going to try to push content that is date sensitive over to my &lt;a href=&quot;http://scottw.me&quot;&gt;tumblr blog&lt;/a&gt;.&lt;/li&gt;
	&lt;li&gt;The site is now generated by &lt;a href=&quot;http://jekyllrb.com&quot;&gt;Jekyll&lt;/a&gt;, powered by &lt;a href=&quot;http://github.com/bry4n/rack-jekyll&quot;&gt;Rack-Jekyll&lt;/a&gt;, and hosted on &lt;a href=&quot;http://heroku.com&quot;&gt;Heroku&lt;/a&gt;. This means I can write it in a simple text editor and then publish it easily via git.&lt;/li&gt;
	&lt;li&gt;I am going without comments for now. If you have questions or comments you can email me at &lt;a href=&quot;mailto:scottwater@gmail.com&quot;&gt;scottwater@gmail.com&lt;/a&gt; or use the &lt;a href=&quot;http://scottw.me/ask&quot;&gt;ask&lt;/a&gt; feature on Tumblr.&lt;/li&gt;
	&lt;li&gt;Blog posts about blogs are lame, so I am going to stop here. I really just wanted to callout the new url and apologize for unread posts you may be seeing in your aggregator. Sorry. :(&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;If you want to see how it is all put together and works, you can grab a copy of it from &lt;a href=&quot;http://github.com/scottwater/&quot;&gt;my git&lt;/a&gt; &lt;a href=&quot;http://github.com/scottwater/scottw_com_blog&quot;&gt;repository&lt;/a&gt;.&lt;/p&gt;</content>
 </entry>
 
 <entry>
   <title>Setting A Tab Title in Terminal</title>
   <link href="http://scottw.com/setting-a-tab-title-in-terminal"/>
   <updated>2010-03-02T00:00:00-05:00</updated>
   <id>http://scottw.com/setting-a-tab-title-in-terminal</id>
   <content type="html">&lt;p&gt;I have been spending a lot more time in terminal recently. I routinely find myself having more tabs open than I can keep track of.&lt;/p&gt;
&lt;p&gt;I then end up forgetting what&amp;#8217;s open and end up opening even more tabs which just make the problem worse.&lt;/p&gt;
&lt;p&gt;I finally got tired of this and &lt;a href=&quot;http://twitter.com/scottw/status/9900627749&quot;&gt;posted a quick question on Twitter&lt;/a&gt;. While waiting for a twitter response, I figured I would finally checkout &lt;a href=&quot;http://superuser.com&quot;&gt;SuperUser&lt;/a&gt; which of course &lt;a href=&quot;http://superuser.com/questions/105499/change-terminal-title-in-osx&quot;&gt;had the answer&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;You just need to execute the following command:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; -n -e &lt;span class=&quot;s2&quot;&gt;&amp;quot;\033]0;YOUR TAB TITLE HERE\007&amp;quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;p&gt;Since there is no way I will remember that command (and who should) I wrapped it in a function that I can put in my .bash_profile.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;&lt;span class=&quot;k&quot;&gt;function &lt;/span&gt;title&lt;span class=&quot;o&quot;&gt;(){&lt;/span&gt;
	&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; -n -e &lt;span class=&quot;s2&quot;&gt;&amp;quot;\033]0;$1\007&amp;quot;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;p&gt;Now, in any tab, I just need to execute:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;title &lt;span class=&quot;s1&quot;&gt;&amp;#39;My Tab Title&amp;#39;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;</content>
 </entry>
 
 <entry>
   <title>Singing With Sinatra</title>
   <link href="http://scottw.com/sinatra"/>
   <updated>2010-02-17T00:00:00-05:00</updated>
   <id>http://scottw.com/sinatra</id>
   <content type="html">&lt;p&gt;I attended a couple Ruby sessions at &lt;a href=&quot;http://scottw.com/code/codemash-2010/&quot;&gt;CodeMash&lt;/a&gt; this year which really piqued my interest level in Ruby.&lt;/p&gt;
&lt;p&gt;For many people (especially web developers) when you hear about Ruby they think Ruby on Rails. While Rails is an impressive framework, there are some other interesting options available. One of them that recently caught my attention (and admiration) is called &lt;a href=&quot;http://www.sinatrarb.com/&quot;&gt;Sinatra&lt;/a&gt;.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;em&gt;Sinatra is a &lt;span class=&quot;caps&quot;&gt;DSL&lt;/span&gt; for quickly creating web applications in Ruby with minimal effort.&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Sinatra is a drop dead simple way to create a small site, blog, service, or even a prototype. Here is all it takes to serve a web request with Sinatra:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;ruby&quot;&gt;&lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;rubygems&amp;#39;&lt;/span&gt; 
&lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;sinatra&amp;#39;&lt;/span&gt; 
&lt;span class=&quot;n&quot;&gt;get&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;/hi&amp;#39;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; 
  &lt;span class=&quot;s2&quot;&gt;&amp;quot;Hello World!&amp;quot;&lt;/span&gt; 
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;p&gt;While the code above returns the UI inline, there is full support for templates, layouts, and much more.&lt;/p&gt;
&lt;p&gt;If you are new to Ruby and want to see what you can do with the language with almost no effort, Sinatra is a great place to start.&lt;/p&gt;
&lt;p&gt;I have been hacking around on it for a couple of days and decided to write a simple plugin. While I am sure I will cringe at this code a couple of months from now, I figured I would post it see if it is useful to others.&lt;/p&gt;
&lt;p&gt;Goal:&lt;br /&gt;
Ensure urls served by the application are consistent by requiring no trailing slash and requiring all urls to be lower cased. If either one of these conditions are not met, the plugin will do a 301 redirect to the proper url.&lt;/p&gt;
&lt;p&gt;Here is the actual plugin:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;ruby&quot;&gt;&lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;sinatra/base&amp;#39;&lt;/span&gt;
 
&lt;span class=&quot;k&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;Sinatra&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;ConsistentUrls&lt;/span&gt;
    
    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;validate_url_requests&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;before&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;path&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;downcase&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;path_to_redirect&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;nil&lt;/span&gt;
 
        &lt;span class=&quot;c1&quot;&gt;#if the path ends in &amp;#39;/&amp;#39; remove it&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;path_to_redirect&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;  &lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt; /.+\/$/&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;match&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
 
        &lt;span class=&quot;c1&quot;&gt;#if the original path was not lower case. NOTE: we lowercase this above to minimize steps&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;path_to_redirect&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;path&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path_to_redirect&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt;  &lt;span class=&quot;n&quot;&gt;path&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;
 
        &lt;span class=&quot;c1&quot;&gt;#if we need to redirect, build a query_string&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path_to_redirect&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
          &lt;span class=&quot;n&quot;&gt;query_string&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;  &lt;span class=&quot;n&quot;&gt;hash_to_querystring&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;params&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
          &lt;span class=&quot;n&quot;&gt;path_to_redirect&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;?&amp;quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;query_string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;query_string&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
 
        &lt;span class=&quot;n&quot;&gt;redirect&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;path_to_redirect&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;301&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;path_to_redirect&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
    
    &lt;span class=&quot;c1&quot;&gt;#borrowed from http://justanothercoder.wordpress.com/2009/04/24/converting-a-hash-to-a-query-string-in-ruby/&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;hash_to_querystring&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;hash&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;nb&quot;&gt;hash&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;keys&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;inject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;query_string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;query_string&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;&amp;amp;&amp;#39;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;unless&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;key&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;hash&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;keys&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;first&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;query_string&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;URI&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;encode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;to_s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;URI&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;encode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;hash&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
    
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
 
  &lt;span class=&quot;n&quot;&gt;register&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;ConsistentUrls&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;p&gt;A minimal application skeleton. The key line is the validate_url_requests which is what invokes the plugin.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;ruby&quot;&gt;&lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;rubygems&amp;#39;&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;sinatra&amp;#39;&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;consistenturls&amp;#39;&lt;/span&gt;
 
&lt;span class=&quot;c1&quot;&gt;#plugin &lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;validate_url_requests&lt;/span&gt;
 
&lt;span class=&quot;n&quot;&gt;get&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;/&amp;#39;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
   &lt;span class=&quot;s2&quot;&gt;&amp;quot;Hello World&amp;quot;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
 
&lt;span class=&quot;n&quot;&gt;get&lt;/span&gt; &lt;span class=&quot;sr&quot;&gt;%r{(.+)}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;catch_all&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&amp;quot;I am the catch all &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;catch_all&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
 
&lt;span class=&quot;n&quot;&gt;not_found&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
  &lt;span class=&quot;s2&quot;&gt;&amp;quot;The path &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; does not exist&amp;quot;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;p&gt;A set of tests.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;ruby&quot;&gt;&lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;demo_app&amp;#39;&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;test/unit&amp;#39;&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;rack/test&amp;#39;&lt;/span&gt;
 
&lt;span class=&quot;n&quot;&gt;set&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:environment&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:test&lt;/span&gt;
 
&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ConsistentUrlsTests&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Test&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Unit&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;TestCase&lt;/span&gt;
  &lt;span class=&quot;kp&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Rack&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Test&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Methods&lt;/span&gt;
 
  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;app&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@app&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Sinatra&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Application&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  
  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;test_urls_with_trailing_slashes_will_be_redirected&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;execute_url_test&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;/some-random-url/&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;/some-random-url&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;execute_url_test&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;/some-random-url/second-path/&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;/some-random-url/second-path&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;  
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  
  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;test_urls_with_trailing_slashes_and_querystrings_will_be_redirected&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;execute_url_test&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;/some-random-url/?abc=123&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;/some-random-url?abc=123&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;execute_url_test&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;/some-random-URL/?abc=123&amp;amp;z=abc&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;/some-random-url?abc=123&amp;amp;z=abc&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  
  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;test_case_sensitive_url_will_be_redirected&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;execute_url_test&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;/CAPS-LOCK-ROCKS&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;/caps-lock-rocks&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; 
  
  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;test_case_sensitive_url_with_trailing_slash_will_be_redirected&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;execute_url_test&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;/CAPS-LOCK-ROCKS/&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;/caps-lock-rocks&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; 
  
  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;test_case_sensitive_url_with_query_string_will_be_redirected&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;execute_url_test&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;/CAPS-LOCK-ROCKS?abc=123&amp;amp;def=HIJ&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;/caps-lock-rocks?abc=123&amp;amp;def=HIJ&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;execute_url_test&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;/CAPS-LOCK-ROCKS/ROCKS/It/ROCKs/?abc=123&amp;amp;def=HIJ&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;/caps-lock-rocks/rocks/it/rocks?abc=123&amp;amp;def=HIJ&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; 
  
  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;execute_url_test&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;url_to_test&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;expected_redirect&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;get&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;url_to_test&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;follow_redirect!&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;assert_equal&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;last_request&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;http://example.org&amp;#39;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;expected_redirect&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;p&gt;Getting started:&lt;/p&gt;
&lt;p&gt;Setup steps for Sinatra can be &lt;a href=&quot;http://github.com/sinatra/sinatra&quot;&gt;found here&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Two things to note.&lt;/p&gt;
&lt;p&gt;1. To run the tests, you will need to get &lt;a href=&quot;http://github.com/brynary/rack-test&quot;&gt;rack-test&lt;/a&gt;. I mistakenly assumed this part of Rack which tripped me up a bit.&lt;/p&gt;
&lt;p&gt;2. You need to grab &lt;a href=&quot;http://rtomayko.github.com/shotgun/&quot;&gt;Shotgun&lt;/a&gt; if you want to have the site reloaded anytime you make a change. This requirement was apparently something that changed recently. It is documented nicely on the Sinatra site, but seems to catch people off guard.&lt;/p&gt;</content>
 </entry>
 
 <entry>
   <title>One Less Step</title>
   <link href="http://scottw.com/one-less-step"/>
   <updated>2010-02-10T00:00:00-05:00</updated>
   <id>http://scottw.com/one-less-step</id>
   <content type="html">&lt;p&gt;Every step a user must take provides a chance for failure and frustration.&lt;/p&gt;
&lt;p&gt;Compare these two shipping confirmation emails from 1-800-Flowers and Zappos.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;1-800-Flowers&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://scottw.com/images/wlw/OneLessStep_8C64/1800Flowers_a404a639-a632-4bcb-b2e7-734bc152e196.jpg&quot; title=&quot;1800 Flowers&quot; alt=&quot;1800 Flowers&quot; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Zappos&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://scottw.com/images/wlw/OneLessStep_8C64/zappos_bda0db96-1cdb-405c-9876-2c29610543ad.jpg&quot; title=&quot;Zappos&quot; alt=&quot;Zappos&quot; /&gt;&lt;/p&gt;
&lt;p&gt;1-800-Flowers actually says, &amp;#8220;2 easy steps&amp;#8221;.&lt;/p&gt;
&lt;p&gt;However, what they are not counting on:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;The tracking code is 18 characters. While more savvy computer users will simply copy and paste, many will try to manually enter the 18 characters. Those that do copy and paste will usually need to highlight the text, go to the edit menu select copy&amp;#8230; in short, they are usually not going to use control+C and then control+V.&lt;/li&gt;
	&lt;li&gt;The &lt;span class=&quot;caps&quot;&gt;UPS&lt;/span&gt; website is stuck in the mid-90&amp;#8217;s and requires you to first pick your country. Don&amp;#8217;t every make the wrong choice here (and of course this adds another step).&lt;/li&gt;
	&lt;li&gt;Users will need to switch back and forth between their email app/screen/tab and the &lt;span class=&quot;caps&quot;&gt;USP&lt;/span&gt; screen.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;The funny thing about this is 1-800-Flowers actually has other links in the confirmation email, including one to &lt;span class=&quot;caps&quot;&gt;UPS&lt;/span&gt;. They just don&amp;#8217;t link to the one that really matters.&lt;/p&gt;</content>
 </entry>
 
 <entry>
   <title>NHProf vs. SQL Profiler</title>
   <link href="http://scottw.com/nhprof-vs-sql-profiler"/>
   <updated>2010-02-09T00:00:00-05:00</updated>
   <id>http://scottw.com/nhprof-vs-sql-profiler</id>
   <content type="html">&lt;p&gt;&lt;a href=&quot;http://nhprof.com/&quot;&gt;NHProf&lt;/a&gt; is a profiling tool for &lt;a href=&quot;https://www.hibernate.org/343.html&quot;&gt;NHibernate&lt;/a&gt;.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;em&gt;NHibernate Profiler is a real-time visual debugger allowing a development team to gain valuable insight and perspective into their usage of NHibernate.&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;What really jumped out at me after using it for just a couple of minutes is how much more useful it is for developers than &lt;span class=&quot;caps&quot;&gt;SQL&lt;/span&gt; Profiler (assuming you are using NHibernate).&lt;/p&gt;
&lt;p&gt;First a couple of screen shots that really tell the whole story:&lt;/p&gt;
&lt;p&gt;NHProf&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://scottw.com/images/wlw/11289ed9fb3a_7C7A/nhprof_1.png&quot; title=&quot;NHProf Screenshot&quot; alt=&quot;NHProf Screenshot&quot; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;caps&quot;&gt;SQL&lt;/span&gt; Server Profiler&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://scottw.com/images/wlw/11289ed9fb3a_7C7A/SQL_Profiler.png&quot; title=&quot;Sql Profiler Crappy Screenshot&quot; alt=&quot;Sql Profiler Crappy Screenshot&quot; /&gt;&lt;/p&gt;
&lt;p&gt;Which one of the two screen shots cares about the user?&lt;/p&gt;
&lt;p&gt;Seriously, if you had to use of these tools daily; would you choose the one that throws up on the screen or the one which tries to make your life easier?&lt;/p&gt;
&lt;p&gt;Obviously there is quite a bit more to &lt;span class=&quot;caps&quot;&gt;SQL&lt;/span&gt; profiler, but for the things a developer would care about on a daily basis, you cannot beat the following:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Results grouped by session. NHibernate cheats by encouraging a single session to be used per page request, but either way it is a very useful way to view what is happening per request.&lt;/li&gt;
	&lt;li&gt;Details about the number of records returned per query.&lt;/li&gt;
	&lt;li&gt;Alerts and Tips pointing you performance improvements&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;So far, NHProf has been a huge help in understanding how NHibernate translates mappings and queries requests into my object model.&lt;/p&gt;
&lt;p&gt;It also makes we wonder why this level of information is not available out of the box via &lt;span class=&quot;caps&quot;&gt;SQL&lt;/span&gt; Profiler, but well&amp;#8230;nevermind.&lt;/p&gt;</content>
 </entry>
 
 
</feed>
